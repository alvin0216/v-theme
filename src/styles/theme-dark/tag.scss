@import 'mixins/mixins';
@import 'common/var';

@mixin genTheme($backgroundColorWeight, $borderColorWeight, $fontColorWeight, $hoverColorWeight) {
  background-color: color-mix(in srgb, var(--tag-primary-color) $backgroundColorWeight, var(--color-dark));
  border-color: color-mix(in srgb, var(--tag-primary-color) $borderColorWeight, var(--color-dark));
  color: color-mix(in srgb, var(--tag-primary-color) $fontColorWeight, var(--color-white));

  @include when(hit) {
    border-color: var(--tag-primary-color);
  }

  .el-tag__close {
    color: color-mix(in srgb, var(--tag-primary-color) $fontColorWeight, var(--color-white));

    &:hover {
      color: var(--color-white);
      background-color: color-mix(in srgb, var(--tag-primary-color) $hoverColorWeight, var(--color-dark));
    }
  }

  // 各主题类型统一转换
  @each $type in (info, success, warning, danger) {
    &.el-tag--#{$type} {
      $color-var: --tag-#{$type}-color;

      background-color: color-mix(in srgb, var(#{$color-var}) $backgroundColorWeight, var(--color-dark));
      border-color: color-mix(in srgb, var(#{$color-var}) $borderColorWeight, var(--color-dark));
      color: color-mix(in srgb, var(#{$color-var}) $fontColorWeight, var(--color-white));

      @include when(hit) {
        border-color: var(#{$color-var});
      }

      .el-tag__close {
        color: color-mix(in srgb, var(#{$color-var}) $fontColorWeight, var(--color-white));

        &:hover {
          background-color: color-mix(in srgb, var(#{$color-var}) $hoverColorWeight, var(--color-dark));
        }
      }
    }
  }
}

// 其余样式保留原有结构不变
@include b(tag) {
  @include genTheme(10%, 20%, 100%, 100%);
  display: inline-block;
  height: 32px;
  padding: $--tag-padding;
  line-height: 30px;
  font-size: $--tag-font-size;
  color: var(--tag-primary-color);
  border-width: 1px;
  border-style: solid;
  border-radius: $--tag-border-radius;
  box-sizing: border-box;
  white-space: nowrap;

  /* ...原有样式代码保留... */

  @include m(dark) {
    @include genTheme(100%, 100%, 0, 70%);
  }

  @include m(plain) {
    @include genTheme(0, 50%, 100%, 100%);

    &,
    &.el-tag--info,
    &.el-tag--success,
    &.el-tag--warning,
    &.el-tag--danger {
      background-color: transparent;
    }
  }

  /* ...尺寸调整样式保留... */
}
