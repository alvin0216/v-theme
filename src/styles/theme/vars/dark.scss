@mixin define-vars($name, $vars) {
  @each $type, $value in $vars {
    --#{$name}-#{$type}: #{$value};
  }
}

$white: #fff;
$dark: #141414;
$black: #000;

@mixin inject-dark-vars() {
  $color: (
    primary: #409eff,
    success: #67c23a,
    warning: #e6a23c,
    danger: #f56c6c,
    info: #909399,
  );

  $primary: map-get($color, primary);
  $hover-percent: 30%;
  $active-percent: 20%;

  $button: (
    active-color: $primary,
    active-background: var(--color-primary-light-9),
    loading-background: rgba(0, 0, 0, 0.3),
    text-hover-color: var(--color-primary-light-5),
    text-active-color: mix($white, $primary, 20%),
    disabled-color: var(--text-placeholder),
    disabled-font-color: rgba(255, 255, 255, 0.5),
    disabled-border-color: var(--border-color-light),
  );

  @each $type, $value in $color {
    $button: map-merge(
      $button,
      (
        #{$type}-hover: mix($dark, $value, $hover-percent),
        #{$type}-active: mix($white, $value, $active-percent),
        #{$type}-disabled: mix($value, $dark, 50%),
        #{$type}-plain-background: mix($dark, $value, 90%),
        #{$type}-plain-border-color: mix($dark, $value, 60%),
        #{$type}-plain-disabled-color: mix($dark, $value, 50%),
        #{$type}-plain-disabled-background: mix($dark, $value, 90%),
        #{$type}-plain-disabled-border-color: mix($dark, $value, 80%)
      )
    );
  }

  html.dark {
    @include define-vars(color, $color);

    --text-primary: #e5eaf3;
    --text-regular: #cfd3dc;
    --text-secondary: #a3a6ad;
    --text-placeholder: #8d9095;
    --text-disabled: #6c6e72;

    --border-color-base: #4c4d4f;
    --border-color-hover: #6c6e72;
    --border-color-light: #414243;
    --border-color-lighter: #363637;
    --border-color-extra-light: #2b2b2c;

    --fill-blank: transparent;
    --fill-base: #262627;
    --fill-overlay: #1d1e1f;
    --fill-dark: #{$dark};

    --box-shadow-base: 0px 12px 32px 4px rgba(0, 0, 0, 0.36), 0px 8px 20px rgba(0, 0, 0, 0.72);
    --box-shadow-dark: 0px 16px 48px 16px rgba(0, 0, 0, 0.72), 0px 12px 32px #000000, 0px 8px 16px -8px #000000;
    --box-shadow-light: 0px 0px 12px rgba(0, 0, 0, 0.72);
    --box-shadow-lighter: 0px 0px 6px rgba(0, 0, 0, 0.72);

    @for $i from 1 through 9 {
      --color-primary-light-#{$i}: #{mix($dark, $primary, $i * 10%)};
    }
    @each $type, $value in map-remove($color, primary) {
      --color-#{$type}-light: #{mix($dark, $value, 80%)};
      --color-#{$type}-lighter: #{mix($dark, $value, 90%)};
    }

    .el-button {
      @include define-vars(button, $button);
    }
    // others
    --slider-button-hover-color: #{mix($primary, black, 97%)};
    --checkbox-disabled-input-fill: #262627;
    --checkbox-button-box-shadow: -1px 0 0 0 var(--color-primary-light-7);

    --select-multiple-input-color: var(--text-regular);
    --message-shadow: var(--box-shadow-light);
    --message-background-color: var(--color-info-lighter);
    --cascader-tag-background: #303030;
    --dialog-box-shadow: var(--box-shadow-base);
    --table-fixed-box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);
    --popover-border-color: var(--border-color-light);
    --dropdown-menuItem-hover-color: var(--color-primary);
    --card-border-color: var(--border-color-light);
    --rate-icon-color: #636466;
    --datepicker-inner-border-color: var(--border-color-light);
    --calendar-selected-background-color: var(--color-primary-light-9);
    --avatar-background-color: var(--text-disabled);
    --skeleton-color: #303030;
    --skeleton-to-color: var(--border-color-light);
    --svg-monochrome-grey: var(--border-color-base);
  }
}

@include inject-dark-vars();
